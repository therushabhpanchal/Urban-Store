(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var i in a)e.o(a,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:a[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=jQuery;var a=e.n(t);function i(e,t,a,i,l,n,o,s){var r,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=a,d._compiled=!0),i&&(d.functional=!0),n&&(d._scopeId="data-v-"+n),o?(r=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),l&&l.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},d._ssrRegister=r):l&&(r=s?function(){l.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:l),r)if(d.functional){d._injectStyles=r;var c=d.render;d.render=function(e,t){return r.call(t),c(e,t)}}else{var m=d.beforeCreate;d.beforeCreate=m?[].concat(m,r):[r]}return{exports:e,options:d}}var l=i({name:"DeliveryTimer",components:{Switches:dokan_get_lib("Switches")},props:["fieldData","sectionId","fieldValue","validationErrors","hasError"],data:function(){return{fullDay:this.checkFullDay(),toggleActive:this.checkWorkingStatus()}},mounted:function(){a()(document).ready((function(){a()(".dokan-clock-control").each((function(){a()(this).timepicker({step:30,lang:dokan_helper.timepicker_locale,timeFormat:dokan_helper.i18n_time_format,noneOption:{label:"Full day",value:"Full day",className:"fullDayClock"},scrollDefault:"now"})}))}))},methods:{get_formatted_time:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dokan_get_i18n_time_format(),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dokan_get_i18n_time_format();return e?moment(e,t).format(a):""},checkFullDay:function(){var e,t,a,i;if(null===(e=this.fieldValue[this.fieldData.name])||void 0===e||!e.opening_time||null===(t=this.fieldValue[this.fieldData.name])||void 0===t||!t.closing_time)return!1;var l=this.get_formatted_time("12:00 am","hh:mm a","hh:mm"),n=this.get_formatted_time("11:59 pm","hh:mm a","hh:mm"),o=this.get_formatted_time(null===(a=this.fieldValue[this.fieldData.name])||void 0===a?void 0:a.opening_time,"hh:mm a","hh:mm"),s=this.get_formatted_time(null===(i=this.fieldValue[this.fieldData.name])||void 0===i?void 0:i.closing_time,"hh:mm a","hh:mm");return o===l&&s===n},checkWorkingStatus:function(){var e,t;return(null===(e=this.fieldValue[this.fieldData.name])||void 0===e?void 0:e.delivery_status)&&(null===(t=this.fieldData)||void 0===t?void 0:t.day)&&this.fieldValue[this.fieldData.name].delivery_status===this.fieldData.day},onTimerSwitch:function(e,t,i){var l=this;i.stopPropagation(),a()(i.target).on("change",(function(a){var i=a.target.timepickerObj.selectedValue;if("Full day"===i)return l.fieldValue[e].opening_time="12:00 am",l.fieldValue[e].closing_time="11:59 pm",void(l.fullDay=!0);l.fullDay=!1,l.fieldValue[e][t]=l.get_formatted_time(i,dokan_get_i18n_time_format(),"hh:mm a"),"11:59 pm"===l.fieldValue[e].closing_time&&(l.fieldValue[e].closing_time="11:30 pm")}))},onToggleDeliverySwitch:function(e){if(e)return this.toggleActive=!0,void(this.fieldValue[this.fieldData.name].delivery_status=this.fieldData.day);this.toggleActive=!1,this.fieldValue[this.fieldData.name].delivery_status=""}}},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"field dokan-settings-fieldset-weekly-switcher",class:[e.fieldData.content_class?e.fieldData.content_class:""]},[t("fieldset",[t("div",{staticClass:"working-status"},[t("switches",{attrs:{enabled:!!e.toggleActive,value:e.toggleActive?"enabled":""},on:{input:e.onToggleDeliverySwitch}})],1),e._v(" "),t("div",{staticClass:"times"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.toggleActive,expression:"toggleActive"}],staticClass:"time"},[t("div",{staticClass:"clock-picker"},[t("span",{staticClass:"dashicons dashicons-clock",class:[{"dokan-clock-error":e.hasError},e.fieldData.class]}),e._v(" "),t("input",{staticClass:"dokan-clock-control dokan-form-control opening-time",class:[{"dokan-input-validation-error":e.hasError},e.fieldData.class],attrs:{type:"text",placeholder:e.__("Opens at","dokan"),id:e.sectionId+"["+e.fieldData.name+"]["+e.fieldData.options.opening_time+"]",name:e.sectionId+"["+e.fieldData.name+"]["+e.fieldData.options.opening_time+"]"},domProps:{value:e.fullDay?"Full Day":e.get_formatted_time(e.fieldValue[this.fieldData.name].opening_time,"hh:mm a")},on:{click:function(t){return e.onTimerSwitch(e.fieldData.name,"opening_time",t)}}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.fieldValue[e.fieldData.name][e.fieldData.options.opening_time],expression:"fieldValue[fieldData.name][fieldData.options['opening_time']]"}],staticClass:"clockOne",attrs:{type:"hidden"},domProps:{value:e.fieldValue[e.fieldData.name][e.fieldData.options.opening_time]},on:{input:function(t){t.target.composing||e.$set(e.fieldValue[e.fieldData.name],e.fieldData.options.opening_time,t.target.value)}}})])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.toggleActive&&!e.fullDay,expression:"toggleActive && ! fullDay"}]},[t("span",{staticClass:"time-to dashicons dashicons-minus"})]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.toggleActive&&!e.fullDay,expression:"toggleActive && ! fullDay"}],staticClass:"time"},[t("div",{staticClass:"clock-picker"},[t("span",{staticClass:"dashicons dashicons-clock",class:[{"dokan-clock-error":e.hasError},e.fieldData.class]}),e._v(" "),t("input",{staticClass:"dokan-clock-control dokan-form-control closing-time",class:[{"dokan-input-validation-error":e.hasError},e.fieldData.class],attrs:{type:"text",placeholder:e.__("Closed at","dokan"),id:e.sectionId+"["+e.fieldData.name+"]["+e.fieldData.options.closing_time+"]",name:e.sectionId+"["+e.fieldData.name+"]["+e.fieldData.options.closing_time+"]"},domProps:{value:e.get_formatted_time(e.fieldValue[this.fieldData.name].closing_time,"hh:mm a")},on:{click:function(t){return e.onTimerSwitch(e.fieldData.name,"closing_time",t)}}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.fieldValue[e.fieldData.name][e.fieldData.options.closing_time],expression:"fieldValue[fieldData.name][fieldData.options['closing_time']]"}],staticClass:"clockTwo",attrs:{type:"hidden"},domProps:{value:e.fieldValue[e.fieldData.name][e.fieldData.options.closing_time]},on:{input:function(t){t.target.composing||e.$set(e.fieldValue[e.fieldData.name],e.fieldData.options.closing_time,t.target.value)}}})])])])])])}),[],!1,null,null,null);const n=i({name:"FieldDeliveryTime",components:{DeliveryTimer:l.exports},props:["fieldData","sectionId","fieldValue","validationErrors"],data:function(){return{}},mounted:function(){},methods:{hasError:function(e){if(this.validationErrors.filter((function(t){return t.name===e})).length>0)return e},getErrorMessage:function(e){var t="";return this.validationErrors.forEach((function(a){a.name===e&&(t=a.error)})),t}}},(function(){var e=this,t=e._self._c;return"day_timer"===e.fieldData.type?t("div",{staticClass:"field_contents",class:[e.fieldData.content_class?e.fieldData.content_class:""]},[t("fieldset",[t("div",{staticClass:"field_data"},[t("h3",{staticClass:"field_heading",attrs:{scope:"row"}},[e._v("\n                "+e._s(e.fieldData.label)+"\n                "),e.fieldData.tooltip?t("span",[t("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.fieldData.tooltip,expression:"fieldData.tooltip"}],staticClass:"dashicons dashicons-editor-help tips",attrs:{title:e.fieldData.tooltip}})]):e._e()]),e._v(" "),t("p",{staticClass:"field_desc"},[e._v(e._s(e.fieldData.desc))])]),e._v(" "),t("DeliveryTimer",{attrs:{fieldData:e.fieldData,fieldValue:e.fieldValue,sectionId:e.sectionId,hasError:e.hasError(e.fieldData.name),validationErrors:e.validationErrors}})],1),e._v(" "),t("fieldset",[e.hasError(e.fieldData.name)?t("p",{staticClass:"dokan-error"},[e._v("\n            "+e._s(e.getErrorMessage(e.fieldData.name))+"\n        ")]):e._e()])]):e._e()}),[],!1,null,null,null).exports;dokan.addFilterComponent("getDokanCustomFieldComponents","dokanSettings",n)})();