(()=>{var o,e,n,i;o=jQuery,e=dokan_helper.i18n_time_format,n=dokanMultipleTime.fullDayString,i={init:function(){o(".dokan-store-times").on("click",".open-close-actions a",this.stopDefaultBehaviour),o(".dokan-store-times").on("focus",".dokan-form-control",this.changeClockTimeOnFocus),o(".dokan-store-times").each(this.onLoadContainer),o(".dokan-store-times").on("click",".added-store-opening-time",this.addedStoreMultipleTime),o(".dokan-store-times").on("click",".remove-store-closing-time",this.removeStoreMultipleTime),o('input[name="dokan_update_store_settings"]').on("click",this.updateStoreSettings),o('input[name="dokan_update_delivery_time_settings"]').on("click",this.updateStoreSettings),o(".dokan-store-times").on("change",".dokan-form-group",this.changeDokanOpenCloseTime),o(".dokan-time-slots .dokan-form-group .switch").on("toggle",this.toggleSwitcher)},stopDefaultBehaviour:function(o){o.stopPropagation(),o.preventDefault()},changeClockTimeOnFocus:function(i){i.stopPropagation();var t=o(this),a=t.closest(".dokan-form-group");a.find(".time .clock-picker .dokan-form-control:eq(0)").timepicker({step:30,lang:dokan_helper.timepicker_locale,minTime:"12:00 am",maxTime:"11:30 pm",timeFormat:e,noneOption:{label:n,value:"fullDay",className:"fullDayClockOne"},scrollDefault:"now"}).on("changeTime",(function(e){var i=e.target.timepickerObj.selectedValue,a=moment(i,"H\\h:mm a").format("hh:mm a");if(n===i||"fullDay"===i){var r=t.closest(".dokan-form-group").find(".and-time"),s=t.closest(".dokan-form-group").find(".time:eq(0)"),d=t.closest(".dokan-form-group").find(".time:eq(1)");void 0!==r[0]?(t.closest(".dokan-store-times").find(".dokan-form-group:eq(0) .time-to").hide(),t.closest(".dokan-store-times").find(".dokan-form-group:eq(0) .time").remove(),t.closest(".dokan-store-times").find(".dokan-form-group:eq(0) .time-to").before(s),t.closest(".dokan-store-times").find(".dokan-form-group:eq(0) .time-to").after(d.hide())):(t.closest(".dokan-form-group").find(".time-to").hide(),t.closest(".dokan-form-group").find(".time:eq(1)").hide()),t.closest(".dokan-store-times").find(".dokan-form-group:eq(0) .added-store-opening-time").hide(),t.closest(".dokan-store-times").find(".dokan-form-group:eq(0)").nextAll(".dokan-form-group").remove(),t.closest(".dokan-store-times").find(".dokan-form-group:eq(0) .clockTwo").val("11:59 pm"),o(this).next("input").val("12:00 am"),o(".ui-timepicker-wrapper").hide(),o(this).val(n)}else t.closest(".dokan-form-group").find(".time-to").show(),t.closest(".dokan-form-group").find(".time:eq(1)").show(),t.closest(".dokan-form-group").find(".added-store-opening-time").show(),o(this).next("input").val(a)})),a.find(".time .clock-picker .dokan-form-control:eq(1)").timepicker({step:30,lang:dokan_helper.timepicker_locale,minTime:"12:00 am",maxTime:"11:30 pm",timeFormat:e,noneOption:{label:n,value:"fullDay",className:"fullDayClockTwo"},scrollDefault:"now"}).on("changeTime",(function(e){var i=e.target.timepickerObj.selectedValue,a=moment(i,"H\\h:mm a").format("hh:mm a");if(n===i||"fullDay"===i){var r=t.closest(".dokan-form-group").find(".and-time"),s=t.closest(".dokan-form-group").find(".time:eq(0)"),d=t.closest(".dokan-form-group").find(".time:eq(1)");void 0!==r[0]?(t.closest(".dokan-store-times").find(".dokan-form-group:eq(0) .time").remove(),t.closest(".dokan-store-times").find(".dokan-form-group:eq(0) .time-to").before(s.hide()).hide(),t.closest(".dokan-store-times").find(".dokan-form-group:eq(0) .time-to").after(d)):(t.closest(".dokan-form-group").find(".time-to").hide(),t.closest(".dokan-form-group").find(".time:eq(0)").hide()),t.closest(".dokan-store-times").find(".dokan-form-group:eq(0) .added-store-opening-time").hide(),t.closest(".dokan-store-times").find(".dokan-form-group:eq(0)").nextAll(".dokan-form-group").remove(),t.closest(".dokan-store-times").find(".dokan-form-group:eq(0) .clockOne").val("12:00 am"),o(this).next("input").val("11:59 pm"),o(".ui-timepicker-wrapper").hide(),o(this).val(n)}else t.closest(".dokan-form-group").find(".time-to").show(),t.closest(".dokan-form-group").find(".time:eq(0)").show(),t.closest(".dokan-form-group").find(".added-store-opening-time").show(),o(this).next("input").val(a)}))},onLoadContainer:function(i){var t=o(this),a=t.find(".toogle-checkbox").val();t.find(".dokan-form-group .time .clock-picker .dokan-form-control").timepicker({timeFormat:e}),t.find(".switch").minitoggle({on:1==a}),"1"===a&&(t.find(".toggle-handle").attr("style","transform: translate3d( 22px, 0px, 0px )"),t.find(".close-status").hide(),t.find(".open-status").show()),t.find(".dokan-form-group").each((function(){var e=o(this),i=t.find(".dokan-form-group:eq(0) .clock-picker .clockOne").val(),a=t.find(".dokan-form-group:eq(0) .clock-picker .clockTwo").val(),r=e.find(".clock-picker .clockTwo").val(),s=e.closest(".dokan-form-group").next(".dokan-form-group");"12:00 am"===i&&"11:59 pm"===a&&(e.find(".time .clock-picker .dokan-form-control:eq(1)").val(""),e.find(".time-to").hide(),e.find(".time:eq(1)").hide(),e.find(".time .clock-picker .dokan-form-control:eq(0)").val(n)),"11:30 pm"!==r&&"11:59 pm"!==r||e.find(".added-store-opening-time").addClass("hide-element"),void 0!==s[0]&&e.find(".added-store-opening-time").addClass("hide-element")}))},addedStoreMultipleTime:function(e){var n=o(this),i=n.closest(".dokan-store-times"),t=i.find(".dokan-form-group .dokan-form-control").get(0).id,a=i.find(".dokan-form-group .dokan-form-control").get(1).id,r=i.find(".dokan-form-group .clockOne").get(0).name,s=i.find(".dokan-form-group .clockTwo").get(0).name,d="<div class='dokan-form-group'>\n                                    <label class='day and-time'></label>\n                                    <label for='opening-time' class='time'>\n                                        <div class='clock-picker'>\n                                            <span class='far fa-clock'></span>\n                                            <input type='text' class='dokan-form-control opening-time' id='".concat(t,"'\n                                                placeholder='").concat(dokanMultipleTime.place_start,"' autocomplete='off' value=''>\n                                            <input type='hidden' value='' class='clockOne' name='").concat(r,"' />\n                                            <span class='fa fa-exclamation-triangle'></span>\n                                        </div>\n                                    </label>\n                                    <span class='time-to fas fa-minus'></span>\n                                    <label for='closing-time' class='time'>\n                                        <div class='clock-picker'>\n                                            <span class='far fa-clock'></span>\n                                            <input type='text' class='dokan-form-control closing-time' autocomplete='off'\n                                                id='").concat(a,"' placeholder='").concat(dokanMultipleTime.place_end,"' value='' />\n                                            <input type='hidden' value='' class='clockTwo' name='").concat(s,"' />\n                                            <span class='fa fa-exclamation-triangle'></span>\n                                        </div>\n                                    </label>\n                                    <label for='open-close-actions' class='open-close-actions' style='display: flex; align-items: center;'>\n                                        <a href='' class='remove-store-closing-time'>\n                                            <span class=\"fas fa-times\" style=\"margin-top: 2px;\"></span>\n                                        </a>\n                                        <a href='' class='added-store-opening-time'>\n                                            ").concat(dokanMultipleTime.add_action,"\n                                        </a>\n                                    </label>\n                                </div>");n.addClass("hide-element"),n.closest(".dokan-form-group").after(d)},removeStoreMultipleTime:function(e){var n=o(this),i=n.closest(".dokan-form-group"),t=i.find(".and-time"),a=i.next(".dokan-form-group");if(void 0!==a[0]){var r=a.find(".opening-time").val(),s=i.prev(".dokan-form-group").find(".closing-time").val(),d=moment(r,"H\\h:mm a").format("HH:mm");moment(s,"H\\h:mm a").format("HH:mm")<d&&(i.next(".dokan-form-group").find(".clock-picker:eq(0)").css({"border-color":"#bbb"}),i.next(".dokan-form-group").find(".clock-picker:eq(0) .fa-clock").css({color:"#666"}),i.next(".dokan-form-group").find(".opening-time").css({color:"#4e4e4e"}))}if(void 0!==t[0])return void 0===a[0]&&i.prev(".dokan-form-group").find(".added-store-opening-time").removeClass("hide-element"),n.closest(".dokan-form-group").remove(),!1;if(void 0===t[0]&&void 0===a[0])return i.find(".time").css({visibility:"hidden"}),i.find(".time-to").css({visibility:"hidden"}),i.find(".open-close-actions").css({visibility:"hidden"}),i.find(".toogle-checkbox").val(0),i.find(".minitoggle").removeClass("active"),i.find(".toggle-handle").css({transform:"translate3d(0px, 0px, 0px)"}),i.find(".close-status").show(),i.find(".open-status").hide(),!1;if(void 0===t[0]&&void 0!==a[0]){var c=a.find(".time:eq(0)"),m=a.find(".time:eq(1)"),l=a.find(".open-close-actions");return i.find(".time").remove(),i.find(".dokan-status").after(c),i.find(".open-close-actions").before(m),i.find(".open-close-actions").before(l),i.find(".open-close-actions:eq(1)").remove(),a.remove(),!1}},changeDokanOpenCloseTime:function(e){e.stopPropagation();var i=o(this),t=i.find(".clock-picker .clockTwo").val(),a=i.closest(".dokan-form-group").next(".dokan-form-group");o(".ui-timepicker-wrapper").hide(),void 0===a[0]&&i.closest(".dokan-form-group").find(".added-store-opening-time").removeClass("hide-element"),"11:30 pm"===t&&i.find(".added-store-opening-time").addClass("hide-element"),o(".dokan-store-times").each((function(){for(var e=o(this).find(".dokan-form-group").length,i=0;i<e;i++){var t=o(this),a=t.find(".dokan-form-group:eq("+i+") .clock-picker .opening-time").val(),r=t.find(".dokan-form-group:eq("+i+") .clock-picker .closing-time").val(),s=t.find(".dokan-form-group:eq("+i+")").prev(".dokan-form-group"),d=t.find(".dokan-form-group:eq("+(i-1)+") .closing-time").val(),c=moment(a,"H\\h:mm a").format("HH:mm"),m=moment(r,"H\\h:mm a").format("HH:mm"),l=moment(d,"H\\h:mm a").format("HH:mm");a&&(r&&n!==r&&c>=m?(t.find(".dokan-form-group:eq("+i+") .clock-picker").css({"border-color":"#F87171"}),t.find(".dokan-form-group:eq("+i+") .fa-clock").css({color:"#F87171"}),t.find(".dokan-form-group:eq("+i+") .dokan-form-control").css({color:"#F87171"})):(t.find(".dokan-form-group:eq("+i+") .dokan-form-control").css({color:"#4e4e4e"}),t.find(".dokan-form-group:eq("+i+") .clock-picker").css({"border-color":"#bbb"}),t.find(".dokan-form-group:eq("+i+") .fa-clock").css({color:"#666"}))),a&&r?t.find(".dokan-form-group:eq("+i+") .fa-exclamation-triangle").css({display:"none"}):(t.find(".dokan-form-group:eq("+i+") .clock-picker").css({"border-color":"#F5C33B"}),t.find(".dokan-form-group:eq("+i+") .dokan-form-control").css({color:"#4e4e4e"}),t.find(".dokan-form-group:eq("+i+") .fa-exclamation-triangle").css({display:"block"})),a&&d&&void 0!==s[0]&&c<l&&(t.find(".dokan-form-group:eq("+i+") .clock-picker:eq(0)").css({"border-color":"#F87171"}),t.find(".dokan-form-group:eq("+i+") .clock-picker:eq(0) .fa-clock").css({color:"#F87171"}),t.find(".dokan-form-group:eq("+i+") .clock-picker:eq(0) .dokan-form-control").css({color:"#F87171"})),n!==a&&n!==r||(t.find(".dokan-form-group:eq("+i+") .dokan-form-control").css({color:"#4e4e4e"}),t.find(".dokan-form-group:eq("+i+") .clock-picker").css({"border-color":"#bbb"}),t.find(".dokan-form-group:eq("+i+") .fa-clock").css({color:"#666"}),t.find(".dokan-form-group:eq("+i+") .fa-exclamation-triangle").css({display:"none"}))}}))},updateStoreSettings:function(e){o(".dokan-store-times").each((function(){for(var t=0,a=o(this).find(".dokan-form-group").length;t<a;t++){var r=o(this),s=r.find(".dokan-form-group:eq("+t+") .clock-picker .opening-time").val(),d=r.find(".dokan-form-group:eq("+t+") .clock-picker .closing-time").val(),c=r.find(".dokan-form-group:eq("+t+")").prev(".dokan-form-group"),m=r.find(".toogle-checkbox").val(),l=r.find(".dokan-form-group:eq("+(t-1)+") .closing-time").val(),f=moment(s,"H\\h:mm a").format("HH:mm"),p=moment(d,"H\\h:mm a").format("HH:mm"),k=moment(l,"H\\h:mm a").format("HH:mm");if("0"!==m&&n!==s&&n!==d){if(!s)return i.updateSettingsView(r,t,150,0),e.preventDefault(),!1;if(!d)return i.updateSettingsView(r,t,150,1),e.preventDefault(),!1;if(f>=p)return i.updateSettingsView(r,t,300),e.preventDefault(),!1;if(l&&void 0!==c[0]&&f<k)return i.updateSettingsView(r,t,300,0),e.preventDefault(),!1}}return!0}))},updateSettingsView:function(e,n,i){return function(t){t=!1!==t?":eq(".concat(t,")"):"",e.find(".dokan-form-group:eq("+n+") .clock-picker"+t).css({"border-color":"#F87171"}),e.find(".dokan-form-group:eq("+n+") .clock-picker"+t+" .fa-clock").css({color:"#F87171"}),e.find(".dokan-form-group:eq("+n+") .dokan-form-control"+t).css({color:"#F87171"}),o("html, body").animate({scrollTop:o(".dokan-time-slots").offset().top-120},i)}(arguments.length>3&&void 0!==arguments[3]&&arguments[3])},toggleSwitcher:function(e){var n=o(this).closest(".dokan-form-group");e.isActive?(n.find(".toogle-checkbox").val(1),n.find(".time").css({visibility:"visible"}),n.find(".time-to").css({visibility:"visible"}),n.find(".open-close-actions").css({visibility:"visible"}),n.nextAll(".dokan-form-group").show(),n.find(".close-status").hide(),n.find(".open-status").show()):(n.find(".toogle-checkbox").val(0),n.find(".time").css({visibility:"hidden"}),n.find(".time-to").css({visibility:"hidden"}),n.find(".open-close-actions").css({visibility:"hidden"}),n.nextAll(".dokan-form-group").hide(),n.find(".close-status").show(),n.find(".open-status").hide())}},o(document).ready((function(){i.init()}))})();